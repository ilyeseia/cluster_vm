# 🏗️ العمارة المعمارية

## نظرة عامة النظام

يستخدم هذا النظام بنية Master/Slave متقدمة مع إدارة ديناميكية للعمال.

### المكونات الرئيسية


┌─────────────────────────────────────────────────────────┐
│                    Orchestrator                          │
│              (المنسق الرئيسي للنظام)                    │
└──────────────────────┬──────────────────────────────────┘
│
┌──────────────┼──────────────┐
│              │              │
▼              ▼              ▼
┌─────────┐  ┌─────────┐  ┌─────────┐
│ Health  │  │ Master  │  │   VM    │
│ Check   │  │Election │  │Creation │
└─────────┘  └─────────┘  └─────────┘
│              │              │
└──────────────┼──────────────┘
│
┌──────────────┼──────────────┐
│              │              │
▼              ▼              ▼
┌─────────┐  ┌─────────┐  ┌─────────┐
│   VM1   │  │   VM2   │  │   VM3   │
│ MASTER  │  │ WORKER  │  │ WORKER  │
└─────────┘  └─────────┘  └─────────┘
│              │              │
└──────────────┼──────────────┘
│
┌──────────────┼──────────────┐
│              │              │
▼              ▼              ▼
┌─────────┐  ┌─────────┐  ┌─────────┐
│Monitoring│ │ Alerts  │  │Reporting│
└─────────┘  └─────────┘  └─────────┘

## دورة العمل الأساسية


START (كل 60 دقيقة)
│
├─► 1. Health Check
│   • فحص حالة جميع VMs
│   • التحقق من الاتصال
│   • فحص الموارد
│
├─► 2. VM Management
│   • حذف VMs المنتهية
│   • إنشاء VMs جديدة إذا لزم الأمر
│   • تحديث معلومات الحالة
│
├─► 3. Master Election
│   • تحليل أداء VMs
│   • اختيار VM بأفضل أداء
│   • تحديث دور Master
│
├─► 4. Job Distribution
│   • جمع الوظائف المعلقة
│   • توزيعها على Workers
│   • تتبع التنفيذ
│
├─► 5. Monitoring
│   • جمع المقاييس
│   • تحليل الأداء
│   • تحديث التقارير
│
├─► 6. Alerts
│   • فحص الحدود
│   • إرسال التنبيهات
│   • تسجيل الأحداث
│
└─► Loop

## معايير الاختيار

### Master Selection
يتم اختيار Master بناءً على:
1. الوقت المتبقي (Priority 1)
2. استهلاك CPU (Priority 2)
3. استهلاك Memory (Priority 3)

### Load Balancing
التوازن يتم حسب:
1. عدد المهام الحالية
2. السعة المتاحة
3. الأداء الحالي

---
